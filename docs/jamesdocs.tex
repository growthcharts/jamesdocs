% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={JAMES internals},
  pdfauthor={Stef van Buuren},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}

\title{JAMES internals}
\author{Stef van Buuren}
\date{2021-05-18}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{preface}{%
\chapter*{Preface}\label{preface}}
\addcontentsline{toc}{chapter}{Preface}

This document contains minimal documentation of JAMES internals.

\hypertarget{intro}{%
\chapter{Introduction}\label{intro}}

\hypertarget{overview}{%
\section{Overview}\label{overview}}

This chapter gives a brief overview the Joint Automatic Measurement and Evaluation System (JAMES).

JAMES is an experimental web service for creating and interpreting charts of child growth and
development. The current version

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  provides access to high-quality over 300 growth charts used by the Dutch youth health care;
\item
  interchanges data coded according to the \href{https://www.ncj.nl/themadossiers/informatisering/basisdataset/documentatie/?cat=13}{Basisdataset JGZ};
\item
  screens for abnormal height, weight and head circumference;
\item
  converts developmental data into the D-score;
\item
  plot D-scores on special D-score charts;
\item
  predicts future growth and development.
\end{enumerate}

The service can be used by anyone interested in high-quality charts for monitoring and evaluating childhood growth and development. This chapter highlights the components of JAMES.

\hypertarget{architecture}{%
\section{Architecture}\label{architecture}}

JAMES provides its services through \href{https://www.opencpu.org}{OpenCPU}, an open system for scientific computing and reproducible research. The system allows for easy integration of growth charts into any \texttt{HTTPS} compliant client by means of OpenCPU's \href{https://www.opencpu.org/api.html}{API}. The JAMES webservice is a RESTful Application Programming Interface (API).

The contents of the system consist of two parts:

\begin{itemize}
\tightlist
\item
  \textbf{JAMES}: A collection of R packages that provides back-end functionality
\item
  \textbf{JESSE}: A gateway front-end JAMES that translates incoming and outcoming requests
\end{itemize}

\hypertarget{r-packages}{%
\section{R packages}\label{r-packages}}

\hypertarget{james-active-packages}{%
\subsection{JAMES Active packages}\label{james-active-packages}}

Active packages reside on the JAMES server and provide all functionality.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.13}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.08}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.79}}@{}}
\toprule
Package & Open & Description \\
\midrule
\endhead
\href{https://github.com/growthcharts/james}{\texttt{james}} & Y & Joint Automatic Measurement and Evaluation System \\
\href{https://github.com/growthcharts/nlreferences}{\texttt{nlreferences}} & Y & Growth References for Children living in The Netherlands \\
\href{https://github.com/growthcharts/centile}{\texttt{centile}} & Y & Translate Measurements, Z-Scores and Centiles with the RIF format \\
\href{https://github.com/growthcharts/chartbox}{\texttt{chartbox}} & Y & Collection of Growth Charts \\
\href{https://github.com/growthcharts/chartcatalog}{\texttt{chartcatalog}} & Y & Catalog of JAMES Growth Charts \\
\href{https://github.com/growthcharts/chartplotter}{\texttt{chartplotter}} & N & Analysing and Plotting Growth Curves \\
\href{https://github.com/growthcharts/curvematching}{\texttt{curvematching}} & N & Personalised Prediction by Matching Invididuals \\
\href{https://github.com/growthcharts/donorloader}{\texttt{donorloader}} & N & Loads Donor Data from Package or Database \\
\href{https://github.com/growthcharts/brokenstick}{\texttt{brokenstick}} & Y & Broken Stick Model for Irregular Longitudinal Data \\
\href{https://github.com/D-score/dscore}{\texttt{dscore}} & Y & D-Score for Child Development \\
\href{https://github.com/growthcharts/bdsreader}{\texttt{bdsreader}} & Y & Read Data from the Basisdataset Jeugdgezondheidszorg \\
\href{https://github.com/growthcharts/growthscreener}{\texttt{growthscreener}} & Y & Finding Children with Unusual Growth Patterns \\
\href{https://github.com/growthcharts/jamesclient}{\texttt{jamesclient}} & Y & Client-side R Functions for JAMES \\
\href{https://github.com/growthcharts/jamesdemodata}{\texttt{jamesdemodata}} & Y & Demo Data for JAMES \\
\bottomrule
\end{longtable}

\hypertarget{james-support-packages}{%
\subsection{JAMES Support packages}\label{james-support-packages}}

Support packages produce half-fabricated materials, provide testing or store documentation.

\begin{longtable}[]{@{}lll@{}}
\toprule
Package & Open & Description \\
\midrule
\endhead
\href{https://github.com/stefvanbuuren/donordata}{\texttt{donordata}} & N & Longitudinal Data for Curve Matching \\
\href{https://github.com/stefvanbuuren/chartdesigner}{\texttt{chartdesigner}} & N & Design Growth Charts for JAMES \\
\href{https://github.com/stefvanbuuren/gateway}{\texttt{gateway}} & Y & Entry to TNO online analytic growth modules \\
\href{https://github.com/stefvanbuuren/jamesdocker}{\texttt{jamesdocker}} & Y & JAMES Docker API \\
\href{https://github.com/stefvanbuuren/bdsschema}{\texttt{bdsschema}} & Y & Data Exchange Tools for the Basisdataset JGZ \\
\href{https://github.com/stefvanbuuren/jamestest}{\texttt{jamestest}} & Y & Shiny app to test JAMES \\
\href{https://github.com/stefvanbuuren/minihealth}{\texttt{minihealth}} & Y & Mini Dossier for Individual Health Data \\
\href{https://github.com/stefvanbuuren/clopus}{\texttt{clopus}} & N & Growth reference library \\
\href{https://github.com/stefvanbuuren/jamesdocs}{\texttt{jamesdocs}} & Y & JAMES internals \\
\bottomrule
\end{longtable}

\hypertarget{jesse}{%
\section{JESSE}\label{jesse}}

\hypertarget{james-servers}{%
\section{JAMES servers}\label{james-servers}}

\begin{itemize}
\tightlist
\item
  Production: \url{https://groeidiagrammen.nl/ocpu/test/}, Docs (outdated): \url{https://groeidiagrammen.nl}
\item
  Test: \url{https://vps.stefvanbuuren.nl/ocpu/test/}
\item
  Future: \texttt{james.tno.nl}
\end{itemize}

\hypertarget{resources}{%
\section{Resources}\label{resources}}

\begin{itemize}
\tightlist
\item
  Demo JAMES at \url{https://tnochildhealthstatistics.shinyapps.io/james_tryout/}
\item
  \href{https://www.opencpu.org}{OpenCPU system}
\item
  \href{https://www.opencpu.org/api.html}{OpenCPU API}
\item
  \url{https://www.tno.nl/groei}, \url{https://www.tno.nl/growth}
\end{itemize}

\hypertarget{james-data-format}{%
\chapter{JAMES data format}\label{james-data-format}}

\hypertarget{objective}{%
\section{Objective}\label{objective}}

This chapter describes the format of the input data accepted by JAMES. The specification

\begin{itemize}
\tightlist
\item
  closely follows the definition of the \href{https://www.ncj.nl/themadossiers/informatisering/basisdataset/}{Basisdataset JGZ 3.25 (2018)};
\item
  defines data objects;
\item
  defines the actions taken by JAMES in case of incorrect, missing or out-of-range data;
\item
  defines the error messages for informing the client.
\end{itemize}

\hypertarget{generic-object-model}{%
\section{Generic object model}\label{generic-object-model}}

\hypertarget{epremdossier-class}{%
\subsection{EPremDossier Class}\label{epremdossier-class}}

\hypertarget{object-model}{%
\subsubsection{Object model}\label{object-model}}

\begin{longtable}[]{@{}lll@{}}
\toprule
EPremDossier & Instance & Class \\
\midrule
\endhead
-\textgreater{} & Clientgegevens & EPremGroep \\
-\textgreater{} & Contactmomenten & EPremContactmoment \\
\bottomrule
\end{longtable}

\hypertarget{syntax-c}{%
\subsubsection{\texorpdfstring{Syntax \texttt{C\#}}{Syntax C\#}}\label{syntax-c}}

\texttt{public\ class\ EPremDossier}

\hypertarget{public-properties}{%
\subsubsection{Public properties}\label{public-properties}}

\begin{longtable}[]{@{}lll@{}}
\toprule
Name & Description & Required \\
\midrule
\endhead
Clientgegevens & Class with basic child data & Y \\
Contactmomenten & Class with data per visit & N \\
InstrumentCode & Integer identifying the instrument & Ignored \\
OrganisatieCode & Integer identifying the care organisation & Y \\
Referentie & String identifying the request & N \\
\bottomrule
\end{longtable}

\hypertarget{epremgroep-class}{%
\subsection{EPremGroep Class}\label{epremgroep-class}}

\hypertarget{object-model-1}{%
\subsubsection{Object model}\label{object-model-1}}

\begin{longtable}[]{@{}lll@{}}
\toprule
EPremGroep & Instance & Class \\
\midrule
\endhead
-\textgreater{} & Elementen & EPremElement \\
-\textgreater{} & Groepen & EPremGroep \\
\bottomrule
\end{longtable}

\hypertarget{syntax-c-1}{%
\subsubsection{\texorpdfstring{Syntax \texttt{C\#}}{Syntax C\#}}\label{syntax-c-1}}

\texttt{public\ class\ EPremGroep}

\hypertarget{public-properties-1}{%
\subsubsection{Public properties}\label{public-properties-1}}

\begin{longtable}[]{@{}lll@{}}
\toprule
Name & Description & Required \\
\midrule
\endhead
Elementen & Class with BDS-elements & Y \\
Groepen & Class with groups of BDS-elements & N \\
\bottomrule
\end{longtable}

\hypertarget{epremelement-class}{%
\subsection{EPremElement Class}\label{epremelement-class}}

\hypertarget{syntax-c-2}{%
\subsubsection{\texorpdfstring{Syntax \texttt{C\#}}{Syntax C\#}}\label{syntax-c-2}}

\texttt{public\ class\ EPremElement}

\hypertarget{public-properties-2}{%
\subsubsection{Public properties}\label{public-properties-2}}

\begin{longtable}[]{@{}lll@{}}
\toprule
Name & Description & Required \\
\midrule
\endhead
Bdsnummer & Integer identifying the BDS-field & Y \\
InternNummer & Integer identifying internal field & Ignored \\
Waarde & Value of the BDS-field & Y \\
Waardeomschrijving & Descriptive label for value & Ignored \\
\bottomrule
\end{longtable}

\hypertarget{epremcontactmoment-class}{%
\subsection{EPremContactmoment Class}\label{epremcontactmoment-class}}

\hypertarget{object-model-2}{%
\subsubsection{Object model}\label{object-model-2}}

\begin{longtable}[]{@{}lll@{}}
\toprule
EPremContactmoment & Instance & Class \\
\midrule
\endhead
-\textgreater{} & Elementen & EPremElement \\
-\textgreater{} & Groepen & EPremGroep \\
\bottomrule
\end{longtable}

\hypertarget{syntax-c-3}{%
\subsubsection{\texorpdfstring{Syntax \texttt{C\#}}{Syntax C\#}}\label{syntax-c-3}}

\texttt{public\ class\ EPremContactmoment\ :\ EPremGroep}

\hypertarget{public-properties-3}{%
\subsubsection{Public properties}\label{public-properties-3}}

\begin{longtable}[]{@{}lll@{}}
\toprule
Name & Description & Required \\
\midrule
\endhead
Elementen & Class with BDS-elements & Y \\
Groepen & Class with groups of BDS-elements & N \\
Tijdstip & Date of visit & Y \\
\bottomrule
\end{longtable}

\hypertarget{bds-elements}{%
\section{BDS-elements}\label{bds-elements}}

\begin{longtable}[]{@{}rlrll@{}}
\toprule
BDS & Description & Value & Label & Required \\
\midrule
\endhead
19 & Sex of child & ``0'' & Unknown & Y \\
& & ``1'' & Male & \\
& & ``2'' & Female & \\
& & ``3'' & Not specified & \\
20 & Date of birth & ``yyyymmdd'' & year-month-day & Y \\
62 & Caretaker relation & ``01'' & biological father & N \\
& & ``02'' & biological mother & \\
& & ``03'' & male partner, stepfather & \\
& & ``04'' & female partner, stepmother & \\
& & ``05'' & adoptive father & \\
& & ``06'' & adoptive mother & \\
& & ``07'' & foster father & \\
& & ``08'' & foster mother & \\
& & ``98'' & other & \\
63 & Caretaker date of birth & ``yyyymmdd'' & year-month-day & N \\
66 & Caretaker education & ``01'' & no primary school & N \\
& & ``02'' & primary school, special ed & \\
& & ``03'' & VSO-MLK/IVBO/VMBO-LWOO & \\
& & ``04'' & LBO/VBO/VMBO-BBL\&KBL & \\
& & ``05'' & MAVO/VMBO-GL\&TL & \\
& & ``06'' & MBO & \\
& & ``07'' & HAVO/VWO & \\
& & ``08'' & HBO/HTS/HEAO & \\
& & ``09'' & WO & \\
& & ``98'' & Other & \\
& & ``00'' & Unknown & \\
71 & Caretaker birth country & ``dddd'' & \href{https://publicaties.rvig.nl/Landelijke_tabellen/Landelijke_tabellen_32_t_m_60_excl_tabel_35/Landelijke_Tabellen_32_t_m_60_in_csv_formaat}{4-digit code, Table 34} & N \\
82 & Gestational age & ``ddd'' & in days & N \\
91 & Smoking during pregnancy & ``1'' & yes & N \\
& & ``2'' & no & \\
& & ``99'' & unknown & \\
110 & Birth weight & ``dddd'' & 3-4 digits, grammes & N \\
235 & Length/height & ``dddd'' & 3-4 digits, millimeters & N \\
245 & Body weight & ``dddddd'' & 3-6 digits, grammes & N \\
252 & Head circumference & ``ddd'' & 2-3 digits, millimeters & N \\
238 & Height biological mother & ``dddd'' & 3-4 digits, millimeters & N \\
240 & Height biological father & ``dddd'' & 3-4 digits, millimeters & N \\
510 & Passive smoking & ``01'' & No smoking in house & N \\
& & ``02'' & Never with child & \\
& & ``03'' & Not in last 7 days & \\
& & ``04'' & Yes & \\
\bottomrule
\end{longtable}

\hypertarget{error-checking}{%
\section{Error checking}\label{error-checking}}

Error checking of the JSON data occurs in three phases:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  PHASE 1: Check whether the JSON data are valid JSON. The process terminates
  with an error message if the input JSON is not valid.
\item
  PHASE 2: Validate the JSON data against the JSON schema specification. The process terminates
  with an error if any required fields are missing. The process generates messages for data points
  that do not conform to the JSON schema, but continues.
\item
  PHASE 3: Check the range of the numeric data. The process generates messages for out-of-range
  values, but continues using the specified values.
\end{enumerate}

The default JSON schema in phase 2 is the built-in JSON schema \texttt{bds\_schema\_str.json}, a data format implementing a version that accepts strings as values for BDS-elements.

\hypertarget{growth-charts-in-james}{%
\chapter{Growth charts in JAMES}\label{growth-charts-in-james}}

\hypertarget{chart-naming-conventions}{%
\section{Chart naming conventions}\label{chart-naming-conventions}}

The link \url{https://groeidiagrammen.nl/ocpu/lib/james/www/} contains an interactive overview of the available growth charts. There are 342 different charts: for boys and girls, for preterms, for different age ranges, for specific ethnic groups, for height, weight, BMI, and so on. Each chart has a chart code, a character code identifying the design. This section explains the construction of the chart codes.

The GitHub repository \url{https://github.com/stefvanbuuren/chartbox} contains the chart libraries that are available to JAMES. The \texttt{list\_charts()} function produces a tabular overview.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{charts }\OtherTok{\textless{}{-}}\NormalTok{ chartbox}\SpecialCharTok{::}\FunctionTok{list\_charts}\NormalTok{()}
\FunctionTok{dim}\NormalTok{(charts)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 394   8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{charts[}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{23}\NormalTok{, }\DecValTok{300}\NormalTok{, }\DecValTok{301}\NormalTok{, }\DecValTok{340}\NormalTok{), ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     chartgrp chartcode population    sex design  side language week
## 1     nl2010      HJAA         HS   male      A front    dutch     
## 22    nl2010      HMBH         HS female      B   hgt    dutch     
## 23    nl2010      HMBR         HS female      B   wfh    dutch     
## 300  preterm   PMAHN28         PT female      A   hgt    dutch   28
## 301  preterm   PMAHN29         PT female      A   hgt    dutch   29
## 340  preterm   PMEAN32         PT female      E front    dutch   32
\end{verbatim}

The \texttt{chartbox} package currently contains three chart groups: \texttt{nl2010}, \texttt{preterm} and \texttt{who}. Each group collects charts of a similar type.

\begin{longtable}[]{@{}lrlll@{}}
\toprule
Chart Group & Charts & Chart code & Description & Source \\
\midrule
\endhead
\texttt{nl2010} & 136 & CCCC & Dutch children 0-21 years, including minorities & \citet{talma2010} \\
\texttt{preterm} & 192 & CCCCCNN & Dutch preterms, ga \textless= 36 weeks, 0-4 years & \citet{bocca2012} \\
\texttt{who} & 14 & CCCC & WHO Child Growth Standards 0-4 years & \href{https://www.who.int/childgrowth/en/}{WHO} \\
\bottomrule
\end{longtable}

The chart code is an alpha-numeric code of four (for \texttt{nl2010} and \texttt{who}) or seven (for \texttt{preterm}) that uniquely identifies each of the charts. The table below specifies the full coding schema used to construct the chart codes.

\begin{longtable}[]{@{}clll@{}}
\toprule
Position & Field & Value & Description \\
\midrule
\endhead
1 & Population & N & Dutch \\
& & T & Turkish \\
& & M & Moroccan \\
& & H & Hindostan \\
& & P & Preterm \\
& & W & WHO \\
2 & Sex & J & Male \\
& & M & Female \\
3 & Design & A & 0-15 months \\
& & B & 0-4 years, WFH \\
& & C & 1-21 years \\
& & D & 0-21 years \\
& & E & 0-4 years, WFA \\
4 & Side & A & A4, front \\
& & B & A4, back \\
& & C & A4, back, no \texttt{hdc} \\
& & H & square, \texttt{hgt} \\
& & O & square, \texttt{hdc} \\
& & Q & square, \texttt{bmi} \\
& & R & square, \texttt{wfh} \\
& & W & square, \texttt{wgt} \\
& & X & A4, double sided \\
5 & Language & N & Dutch \\
& & E & English \\
6-7 & Week & 25-36 & Gestational age \\
\bottomrule
\end{longtable}

For illustration, code \texttt{NJAA} references to Dutch (\texttt{N}), boys (\texttt{J}), 0-15 month (\texttt{A}), front side (\texttt{A}). Likewise, \texttt{PMEAN33} codes for the chart of preterm (\texttt{M}), girls (\texttt{M}), 0-4 years (\texttt{E}), front side (\texttt{A}), Dutch language (\texttt{N}) born at 33 weeks of gestation (\texttt{33}).

Some forms hold multiple growth charts. For example, the \texttt{NJAA} chart is designed for A4 paper size (297mm \(\times\) 210mm) and contains three growth charts: head circumference by age, length by age, and weight by age. Some others have no diagram, like \texttt{NJAB} with explanations. All square formats hold one growth chart. All of the square forms have equal sizes (160mm \(\times\) 160mm).

The following table lists the measures per design-form combination.

\begin{longtable}[]{@{}ccll@{}}
\toprule
Design & Side & Measure & Description \\
\midrule
\endhead
A & A & \texttt{hdc} & Head circumference by age, 0-15 mo \\
& & \texttt{hgt} & Length by age, 0-15 mo \\
& & \texttt{wgt} & Weight by age, 0-15 mo \\
& B & & \\
& H & \texttt{hgt} & Length by age, 0-15 mo \\
& O & \texttt{hdc} & Head circumference by age, 0-15 mo \\
& W & \texttt{wgt} & Weight by age, 0-15 mo \\
B & A & \texttt{wfh} & Weight for height, 0-4 yr \\
& & \texttt{hgt} & Length by age, 0-4 yr \\
& B & \texttt{hdc} & Head circumference by age, 0-4 yr \\
& C & & \\
& H & \texttt{hgt} & Height by age, 0-4 yr \\
& O & \texttt{hdc} & Head circumference by age, 0-4 yr \\
& R & \texttt{wfh} & Weight for height, 0-4 yr \\
& W & \texttt{wgt} & Weight by age, 0-4 yr \\
C & A & \texttt{wfh} & Weight for height, 1-21 yr \\
& & \texttt{hgt} & height by age, 1-21 yr \\
& B & \texttt{bmi} & BMI by age, 1-21 yr \\
& & \texttt{hdc} & Head circumference by age, 1-21 yr \\
& C & \texttt{bmi} & BMI by age, 1-21 yr \\
& H & \texttt{hgt} & Height by age, 1-21 yr \\
& O & \texttt{hdc} & Head circumference by age, 1-21 yr \\
& Q & \texttt{bmi} & Body mass index by age, 1-21 yr \\
& R & \texttt{wfh} & Weight for height, 1-21 yr \\
E & A & \texttt{wgt} & Weight by age, 0-4 yr \\
& & \texttt{hgt} & height by age, 0-4 yr \\
& B & \texttt{hdc} & Head circumference by age, 0-4 yr \\
& H & \texttt{hgt} & Height by age, 0-4 yr \\
& O & \texttt{hdc} & Head circumference by age, 0-4 yr \\
& W & \texttt{wgt} & Weight by age, 0-4 yr \\
\bottomrule
\end{longtable}

\hypertarget{methods}{%
\chapter{Methods}\label{methods}}

We describe our methods in this chapter.

\hypertarget{d-score-implementation}{%
\chapter{D-score implementation}\label{d-score-implementation}}

This document describes the actions needed to implement the
\href{https://stefvanbuuren.name/dbook1/}{D-score} into JAMES. The functionality of JAMES is distributed over multiple packages. This set of actions may be of interest when implementing new features.

\hypertarget{actions}{%
\section{Actions}\label{actions}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.29}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.32}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.39}}@{}}
\toprule
Package & PR & Description \\
\midrule
\endhead
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/03a32f1960e81a685bb749911e6ea297684ab4dc}{03a32f1} & Create milestones descriptions \\
dscore & \href{https://github.com/stefvanbuuren/dscore/commit/f0013ce9a02d34ad25dd5c101c6a7c5b1444b53b}{f0013ce} & Link BDS number to Van Wiechen milestones \\
dscore & \href{https://github.com/stefvanbuuren/dscore/commit/688685477082ac6c040b9d18035b5178a39a5cc0}{6886854} & Fine tuning of milestone labels \\
minihealth & & Create the \texttt{bds\_lexicon} object \\
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/4893982631717539b070c8d19b88b2b10319f2ee}{4893982} & Add milestones to BDS validation JSON schema \\
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/0069671c8d09f64f2436faa93b764bd288324fcc}{0069671} & Add \texttt{convert\_ddi\_gsed()} to convert BDS-milestones into GSED items \\
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/8ab1392fdbe781adfa004fcadb4f661c14487cf2}{8ab1392} & Add a new class \texttt{individualDS} for storing milestones, D-score and DAZ \\
clopus & \href{https://github.com/stefvanbuuren/clopus/commit/1182cb02508a3207c0c9bcb35232851c38d24179}{1182cb0} & Add Dutch and GCDG D-score references \\
clopus & \href{https://github.com/stefvanbuuren/clopus/commit/7bdbcd9629bb215f466bbc2e2f886b6f16c5b5e9}{7bdbcd9} & Construct age-shifted D-score references for preterms \\
clopus & \href{https://github.com/stefvanbuuren/clopus/commit/ceab7f9547b9ae843a97b640d920ea0c36185053}{ceab7f9} & Import the D-score references into \texttt{clopus} \\
chartdesigner & \href{https://github.com/stefvanbuuren/chartdesigner/commit/68831906cef5cdca0d8851b057a01cc8be4fff6d}{6883190} & Add chart constructor functions for D-score, both terms and pre-terms \\
chartdesigner & \href{https://github.com/stefvanbuuren/chartdesigner/commit/511f456884bc62d6bebc9b5ef33cebb940dc126d}{511f456} & Extend internal \texttt{set.axes.design()} to D-score charts \\
chartdesigner & \href{https://github.com/stefvanbuuren/chartdesigner/commit/6582af8753331a25d8970683d4523c69d6959f0d}{6582af8} & Extend to \texttt{axes.locations} object to D-score charts \\
chartdesigner & \href{https://github.com/stefvanbuuren/chartdesigner/commit/47e3cc39d1253a41d3cc81d3d6dd55bffa842f18}{47e3cc3} & Create \texttt{dchart()} function and extend its helper functions \\
chartdesigner & \href{https://github.com/stefvanbuuren/chartdesigner/commit/fbbc7c8647ea010b2292fa9dd9b253ce95b6a54b}{fbbc7c8} & Function \texttt{chartcode()} factory, make one function for each chart code \\
chartcatalog & \href{https://github.com/stefvanbuuren/chartcatalog/commit/cc467888dd5346d7ed2c0a78b976a8fa818f712c}{cc46788} & Extend the chart naming system to D-score charts \\
chartcatalog & \href{https://github.com/stefvanbuuren/chartcatalog/commit/84aaded206a5050660bd347d2e093af93b6b7ae1}{84aaded} & Extend the lookup table \texttt{ynames\_lookup} to handle new D-score charts \\
chartbox & \href{https://github.com/stefvanbuuren/chartbox/commit/aa310672a717f9777e2daac409d5ec40f3db509f}{aa31067} & Extend chart box with all D-score charts \\
james & \href{https://github.com/stefvanbuuren/james/commits/dscore}{6412840} & Add radio button for D-score charts \\
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/06a04c9ce70546db7998de5147a15897af0c7ddb}{06a04c9} & Calculate D-score and DAZ \\
chartplotter & \href{https://github.com/stefvanbuuren/chartplotter/commit/4b5863813da5304ab5117feba216b7a0822fcd16}{4b58638} & Skip the \texttt{dsc} field for finding matches \\
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/816be33b8921ab8d80d8a750d5c4e11966a58c18}{816be33} & Add D-score and DAZ to class \texttt{individualAN} \\
donordata & \href{https://github.com/stefvanbuuren/donordata/commit/77e01b40e2be75c19f27423092aa5626b0d5d3c3}{77e01b4} & Add milestones to SMOCC donor data \\
donordata & \href{https://github.com/stefvanbuuren/donordata/commit/ecb3413b115c3193135b1af118597768b083dc41}{ecb3413} & Calculate D-score and DAZ for SMOCC data \\
donordata & \href{https://github.com/stefvanbuuren/donordata/commit/3fa9d4de347d09ccff32a887cf6bd8dadfdfaeb6}{3fa9d4d} & Fit and store brokenstick model for D-score on SMOCC data \\
donorloader & \href{https://github.com/stefvanbuuren/donorloader/commit/c22c44607b40ff6bda2009c25894362b68831275}{c22c446} & Update internal data after changes in donordata \\
jamesdocs & TBD & Document steps (this file) \\
donordata & \href{https://github.com/stefvanbuuren/donordata/commit/7983c3d81a69eb9c6b81a3e0f0668e892c5abf5a}{7983c3} & Saves the item scores to create JSON files \\
donordata & \href{https://github.com/stefvanbuuren/donordata/commit/1537182a0df4180e0000d59225c6355a9c506472}{1537182} & Save mapping between SMOCC and BDS coding scheme \\
donorloader & \href{https://github.com/stefvanbuuren/donorloader/commit/e9a8ed9054ebe1ba3a060883d53cfa0ce1f963d2}{e9a8ed} & Make \texttt{smocc\_bds} available to JAMES \\
jamestest & \href{https://github.com/stefvanbuuren/jamestest/commit/6484191fd8de0d93b35354aa3ee846447aa81df6}{648419} & Regenerate smocc JSON files to include DDI scores \\
jamestest & \href{https://github.com/stefvanbuuren/jamestest/commit/ce1dbe5591ca7182fef05ea6c5cb0d1361e876dc}{ce1dbe} & Update the \texttt{installed.cabinets} object with the new individual milestones data \\
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/4dda8daabca8811a4cc321c66aaccf31c4aba83f}{4dda8d} & Add class \texttt{individualRW} to store and convert raw milestones data \\
minihealth & \href{https://github.com/stefvanbuuren/minihealth/commit/9e03e7e39b007a9687d21efbaa13e77283866d5c}{9e03e7} & Complete the JSON validator schema \\
\bottomrule
\end{longtable}

\hypertarget{dockerfile-for-james}{%
\chapter{Dockerfile for JAMES}\label{dockerfile-for-james}}

\hypertarget{objective-1}{%
\section{Objective}\label{objective-1}}

This chapter describes how to build and deploy JAMES as a Docker container.

\hypertarget{pre-requisites}{%
\section{Pre-requisites}\label{pre-requisites}}

JAMES is currently constructed from a collection of \texttt{R} packages. The top-level package at \url{https://github.com/stefvanbuuren/james} also defines a Javascript interface in the \texttt{inst/www} directory. Deployment of JAMES relies on the \texttt{OpenCPU} server. In principle, it is enough to install the \texttt{james} package on the \texttt{OpenCPU} server, and will also install all dependencies.

The following is needed to build and run a JAMES image:

\begin{itemize}
\item
  Permission to read from the following private repo's:

  \begin{itemize}
  \tightlist
  \item
    \texttt{stefvanbuuren/chartplotter}
  \item
    \texttt{stefvanbuuren/clopus}
  \item
    \texttt{stefvanbuuren/curvematching}
  \item
    \texttt{stefvanbuuren/donorloader}
  \end{itemize}
\item
  Personal Github token with repo scope from \href{https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line}{here}, Generate a token with only scope repo.
\item
  Install \texttt{Docker\ Desktop} on your local machine, and run some tutorials
\end{itemize}

\hypertarget{dockerfile}{%
\section{Dockerfile}\label{dockerfile}}

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{FROM}\NormalTok{ opencpu/base as intermediate}

\CommentTok{\# install for V8 package}
\ExtensionTok{RUN}\NormalTok{ apt{-}get update }\KeywordTok{\&\&} \ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ libnode{-}dev}

\CommentTok{\# repo\_token.txt should be something like "GITHUB\_PAT=624adeaa..."}
\CommentTok{\# to be able to install packages from private repo\textquotesingle{}s}
\ExtensionTok{COPY}\NormalTok{ repo\_token.txt .Renviron}

\CommentTok{\# install R packages needed for JAMES}
\ExtensionTok{RUN} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}install.packages("remotes")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/clopus")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/dscore")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/chartbox")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/brokenstick")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/minihealth")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/jamestest")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/growthscreener")\textquotesingle{}} \DataTypeTok{\textbackslash{}}
\NormalTok{    R }\AttributeTok{{-}e} \StringTok{\textquotesingle{}remotes::install\_github("stefvanbuuren/james")\textquotesingle{}}

\CommentTok{\# rebuild layer without .Renviron}
\ExtensionTok{FROM}\NormalTok{ opencpu/base}

\ExtensionTok{LABEL}\NormalTok{ maintainer=}\StringTok{"stef.vanbuuren@tno.nl"} 

\CommentTok{\# re{-}install for V8 package}
\ExtensionTok{RUN}\NormalTok{ apt{-}get update }\KeywordTok{\&\&} \ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ libnode{-}dev}

\CommentTok{\# copy R libraries}
\ExtensionTok{COPY} \AttributeTok{{-}{-}from}\OperatorTok{=}\NormalTok{intermediate /usr/local/lib/R/site{-}library /usr/local/lib/R/site{-}library}

\CommentTok{\# modify preload section}
\ExtensionTok{COPY}\NormalTok{ james.conf /etc/opencpu/server.conf.d/james.conf}

\CommentTok{\# install Arial}
\ExtensionTok{RUN}\NormalTok{ mkdir /usr/share/fonts/truetype/arial/}
\ExtensionTok{COPY}\NormalTok{ fonts/truetype/arial/}\PreprocessorTok{*}\NormalTok{ /usr/share/fonts/truetype/arial/}

\ExtensionTok{CMD}\NormalTok{ service cron start }\KeywordTok{\&\&} \ExtensionTok{apachectl} \AttributeTok{{-}DFOREGROUND}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Create a fresh directory, and \texttt{cd} to this directory in your terminal
\item
  Store the script given above in a file named \texttt{Dockerfile}
\item
  Create a file named \texttt{repo\_token.txt} with one line: \texttt{GITHUB\_PAT=624adeaa...} with your token
\item
  Create \texttt{fonts/truetype/arial} with the proper \texttt{ttf} files
\item
  Create a file \texttt{james.conf} specifying the preload libraries
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{\{}
    \StringTok{"enable.api.library"}\ExtensionTok{:}\NormalTok{ true,}
    \StringTok{"enable.api.apps"}\ExtensionTok{:}\NormalTok{ true,}
    \StringTok{"enable.api.user"}\ExtensionTok{:}\NormalTok{ true,}
    \StringTok{"enable.api.tmp"}\ExtensionTok{:}\NormalTok{ true,}
    \StringTok{"enable.cors"}\NormalTok{ : true,}
    \StringTok{"enable.post.code"}\ExtensionTok{:}\NormalTok{ true,}
    \StringTok{"enable.rlimits"}\NormalTok{ : true,}
    \StringTok{"error.showcall"}\ExtensionTok{:}\NormalTok{ true,}
    \StringTok{"smtp.server"}\NormalTok{ : }\StringTok{"localhost"}\NormalTok{,}
    \StringTok{"smtp.use.ssl"}\NormalTok{ : }\StringTok{"no"}\NormalTok{,}
    \StringTok{"httpcache.post"}\ExtensionTok{:}\NormalTok{ 300,}
    \StringTok{"httpcache.lib"}\ExtensionTok{:}\NormalTok{ 86400,}
    \StringTok{"httpcache.apps"}\ExtensionTok{:}\NormalTok{ 900,}
    \StringTok{"httpcache.tmp"}\ExtensionTok{:}\NormalTok{ 86400,}
    \StringTok{"httpcache.static"}\ExtensionTok{:}\NormalTok{ 31536000,}
    \StringTok{"key.length"}\NormalTok{ : 13,}
    \StringTok{"repos"}\ExtensionTok{:} \StringTok{"https://cran.rstudio.com"}\NormalTok{,}
    \StringTok{"rlimit.as"}\ExtensionTok{:}\NormalTok{ 4e9,}
    \StringTok{"rlimit.fsize"}\ExtensionTok{:}\NormalTok{ 1e9,}
    \StringTok{"rlimit.nproc"}\ExtensionTok{:}\NormalTok{ 500,}
    \StringTok{"timelimit.get"}\ExtensionTok{:}\NormalTok{ 60,}
    \StringTok{"timelimit.post"}\ExtensionTok{:}\NormalTok{ 90,}
    \StringTok{"timelimit.webhook"}\ExtensionTok{:}\NormalTok{ 900,}
    \StringTok{"preload"}\ExtensionTok{:}\NormalTok{ [}\StringTok{"clopus"}\NormalTok{, }\StringTok{"donorloader"}\NormalTok{, }\StringTok{"chartbox"}\NormalTok{, }\StringTok{"brokenstick"}\NormalTok{, }\StringTok{"minihealth"}\NormalTok{, }\StringTok{"growthscreener"}\NormalTok{, }\StringTok{"james"}\NormalTok{]}
\KeywordTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{docker-commands}{%
\section{Docker commands}\label{docker-commands}}

Build the \texttt{james} image, type in a terminal

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{docker}\NormalTok{ build }\AttributeTok{{-}t}\NormalTok{ james .}
\end{Highlighting}
\end{Shaded}

This may takes a long time (30 minutes), in which the entire application is downloaded from various web-locations. After (hopefully succesful) completion, check the image

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{docker}\NormalTok{ images }\AttributeTok{{-}a}
\end{Highlighting}
\end{Shaded}

If all is well, the top line is called \texttt{james}. Now run the container on your local machine:

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{docker}\NormalTok{ run }\AttributeTok{{-}t} \AttributeTok{{-}d} \AttributeTok{{-}p}\NormalTok{ 80:80 james}
\end{Highlighting}
\end{Shaded}

If the ports are already taken by other containers, stop and remove all containers:

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{docker}\NormalTok{ stop }\VariableTok{$(}\ExtensionTok{docker}\NormalTok{ ps }\AttributeTok{{-}a} \AttributeTok{{-}q}\VariableTok{)}
\ExtensionTok{docker}\NormalTok{ rm }\VariableTok{$(}\ExtensionTok{docker}\NormalTok{ ps }\AttributeTok{{-}a} \AttributeTok{{-}q}\VariableTok{)}
\end{Highlighting}
\end{Shaded}

Reissue the \texttt{docker\ run}, and the container should now run. Check by

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{docker}\NormalTok{ ps}
\end{Highlighting}
\end{Shaded}

which should list a container created from the \texttt{james} image.

If you want to enter the container use

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{docker}\NormalTok{ exec }\AttributeTok{{-}i} \AttributeTok{{-}t}\NormalTok{ 6c /bin/bash}
\end{Highlighting}
\end{Shaded}

where \texttt{6c} are the first two characters of the container ID.

Inside the container, check font matching of Arial as

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{fc{-}match}\NormalTok{ Arial}
\end{Highlighting}
\end{Shaded}

\hypertarget{checks-with-the-browser}{%
\section{Checks with the browser}\label{checks-with-the-browser}}

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{http://localhost}
\end{Highlighting}
\end{Shaded}

should show Apache2 Ubuntu default screen.

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{http://localhost/ocpu/test/}
\end{Highlighting}
\end{Shaded}

should show \texttt{OpenCPU} test page.

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{http://localhost/rstudio/}
\end{Highlighting}
\end{Shaded}

should start the Rstudio IDE - \emph{if installed} . Use \texttt{opencpu:opencpu} to log in.

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{http://localhost/ocpu/library/james/www/}
\end{Highlighting}
\end{Shaded}

should start the JAMES javascript interface.

See also \url{https://registry.hub.docker.com/r/opencpu/rstudio}

\hypertarget{security}{%
\section{Security}\label{security}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Don't use the intermediate container, since it will contain your token in \texttt{/.Renviron}. The latest (\texttt{james}) container does not hold your token, and can be shared.
\item
  The container is shielded from the machine on which it runs. However, the materials within the container are only protected by \texttt{R\_LIMITS}. In general, for production it is wise to add restriction on the \texttt{OpenCPU} server.
\end{enumerate}

  \bibliography{book.bib,packages.bib}

\end{document}
